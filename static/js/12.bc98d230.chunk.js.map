{"version":3,"file":"static/js/12.bc98d230.chunk.js","mappings":"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","sources":["Pages/Profile/profile.jsx"],"sourcesContent":["import React, { useState, useEffect, useMemo } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport { Link, useNavigate, Navigate } from 'react-router-dom'\r\nimport { removeActiveUser } from '../../Redux/Actions/userActions'\r\nimport * as RouteTypes from \"../../Constants/routesTypes\"\r\nimport { deleteDoc, doc, getDoc } from 'firebase/firestore'\r\nimport { db, storage } from '../../Firebase/config'\r\nimport { deleteObject, ref } from 'firebase/storage'\r\nimport { getAuth } from 'firebase/auth'\r\nimport { Confirmation } from '../../Components';\r\nimport { Purchase } from '../../Components';\r\nimport { nanoid } from \"nanoid\";\r\nimport { motion } from 'framer-motion';\r\nimport \"./profile.scss\";\r\nimport { setIsPageDisabled } from '../../Redux/Actions/disabledActions'\r\nimport { setIsBeingLoaded } from '../../Redux/Actions/isBeingLoadedActions'\r\n\r\nexport default function Profile() {\r\n    const user = useSelector(obj => obj.currentUser.user);\r\n    const isPageDisabled = useSelector(obj => obj.isPageDisabled);\r\n\r\n    const dispatch = useDispatch();\r\n    const navigate = useNavigate();\r\n\r\n    const [isHovered, setIsHovered] = useState();\r\n    const [shouldUserSignOut, setShouldUserSignOut] = useState(false);\r\n\r\n    const purchasesList = useMemo(() => user.purchasesList\r\n        .map(elem => <Purchase\r\n            purchase={elem}\r\n            key={nanoid()}\r\n        />),\r\n        [user.purchasesList]\r\n    )\r\n    \r\n    if (!user.username) {\r\n        return <Navigate to={RouteTypes.LOGIN}/>\r\n    }\r\n\r\n    async function deleteUser() {\r\n        dispatch(setIsBeingLoaded(true));\r\n\r\n        if (user.profileImage !== \"\") {\r\n            const deleteImageRef = ref(storage, user.profileImage);\r\n            await deleteObject(deleteImageRef);\r\n        }\r\n\r\n        await deleteDoc(doc(db, \"users\", user.userId));\r\n\r\n        await getAuth().currentUser.delete();\r\n        dispatch(removeActiveUser());\r\n\r\n        dispatch(setIsBeingLoaded(false));\r\n    }\r\n\r\n    function signOut() {\r\n        dispatch(removeActiveUser());\r\n        navigate(RouteTypes.MAIN)\r\n    }\r\n\r\n    return (\r\n        <motion.div\r\n            className=\"div-column\"\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n        >\r\n            {isPageDisabled &&\r\n                (shouldUserSignOut ?\r\n                    <Confirmation\r\n                        text=\"sign out\"\r\n                        callback={signOut}\r\n                    /> :\r\n                    <Confirmation\r\n                        text=\"delete your account\"\r\n                        callback={deleteUser}\r\n                    />\r\n                )\r\n            }\r\n            <div \r\n                className={`profile col-12 col-sm-11 col-md-10 ${isPageDisabled && \"disabled-page\"}`}\r\n            >\r\n                <div className=\"profile-image\">\r\n                    <img\r\n                        src={user.profileImage || process.env.PUBLIC_URL + \"/Images/default-avatar-image.jpg\"}\r\n                        className=\"\"\r\n                    />\r\n                </div>\r\n                <div className=\"profile-container\">\r\n                    <div className=\"profile-info\">\r\n                        <div>\r\n                            <h1>{user.fullName}</h1>\r\n                            <p className=\"info\">{`@${user.username}`}</p>\r\n                        </div>\r\n                        <button onClick={() => setIsHovered(prevVal => !prevVal)}>\r\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M8 12h.01M12 12h.01M16 12h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                            </svg>\r\n                        </button>\r\n                        {isHovered &&\r\n                            <div className=\"links-container\">\r\n                                <button onClick={() => {\r\n                                    setShouldUserSignOut(false);\r\n                                    dispatch(setIsPageDisabled(true));\r\n                                }}>\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" />\r\n                                    </svg>\r\n                                </button>\r\n                                <button onClick={() => {\r\n                                    setShouldUserSignOut(true);\r\n                                    dispatch(setIsPageDisabled(true));\r\n                                }}>\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M13 9l3 3m0 0l-3 3m3-3H8m13 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\r\n                                    </svg>\r\n                                </button>\r\n                                <Link to={RouteTypes.CHANGE_PROFILE}>\r\n                                    <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-6 w-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}>\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z\" />\r\n                                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\r\n                                    </svg>\r\n                                </Link>\r\n                            </div>\r\n                        }\r\n                    </div>\r\n                    <div className=\"profile-features\">\r\n                        <div className=\"profile-feature\">\r\n                            <div>\r\n                                <img src={process.env.PUBLIC_URL + \"/Images/user.svg\"} />\r\n                                <h1>Gender</h1>\r\n                            </div>\r\n                            <p className=\"info\">{user.gender || \"unknown\"}</p>\r\n                        </div>\r\n                        <div className=\"profile-feature\">\r\n                            <div>\r\n                                <img src={process.env.PUBLIC_URL + \"/Images/date.svg\"} />\r\n                                <h1>Birthday</h1>\r\n                            </div>\r\n                            <p className=\"info\">{user.birthday || \"unknown\"}</p>\r\n                        </div>\r\n                        <div className=\"profile-feature\">\r\n                            <div>\r\n                                <img src={process.env.PUBLIC_URL + \"/Images/message.svg\"} />\r\n                                <h1>Email</h1>\r\n                            </div>\r\n                            <p className=\"info\">{user.emailAddress}</p>\r\n                        </div>\r\n                        <div className=\"profile-feature\">\r\n                            <div>\r\n                                <img src={process.env.PUBLIC_URL + \"/Images/phone.svg\"} />\r\n                                <h1>Phone number</h1>\r\n                            </div>\r\n                            <p className=\"info\">{user.phoneNumber || \"unknown\"}</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            {purchasesList.length ?\r\n                <div className={`purchases-list col-12 col-sm-11 col-md-10 ${isPageDisabled && \"disabled-page\"}`}>\r\n                    <h1 className=\"h1-black-default\">Your purchases</h1>\r\n                    {purchasesList}\r\n\r\n                </div> :\r\n                <div className={`purchases-list col-12 col-sm-11 col-md-10 ${isPageDisabled && \"disabled-page\"}`}>\r\n                    <h1 className=\"h1-black-default\">Your purchases list is empty</h1>\r\n                </div>}\r\n        </motion.div>\r\n    )\r\n}"],"names":["Profile","user","useSelector","obj","currentUser","isPageDisabled","dispatch","useDispatch","navigate","useNavigate","useState","isHovered","setIsHovered","shouldUserSignOut","setShouldUserSignOut","purchasesList","useMemo","map","elem","purchase","nanoid","username","to","RouteTypes","setIsBeingLoaded","profileImage","deleteImageRef","ref","storage","deleteObject","deleteDoc","doc","db","userId","getAuth","delete","removeActiveUser","motion","className","initial","opacity","animate","exit","text","callback","src","process","fullName","onClick","prevVal","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","setIsPageDisabled","gender","birthday","emailAddress","phoneNumber","length"],"sourceRoot":""}